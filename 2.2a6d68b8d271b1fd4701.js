(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{346:function(n,e,t){"use strict";(function(n){t.d(e,"N",(function(){return y})),t.d(e,"K",(function(){return k})),t.d(e,"Q",(function(){return x})),t.d(e,"S",(function(){return R})),t.d(e,"O",(function(){return O})),t.d(e,"R",(function(){return S})),t.d(e,"L",(function(){return T})),t.d(e,"M",(function(){return j})),t.d(e,"T",(function(){return P})),t.d(e,"P",(function(){return D})),t.d(e,"G",(function(){return I})),t.d(e,"A",(function(){return A})),t.d(e,"F",(function(){return q})),t.d(e,"b",(function(){return J})),t.d(e,"g",(function(){return M})),t.d(e,"q",(function(){return N})),t.d(e,"c",(function(){return V})),t.d(e,"k",(function(){return C})),t.d(e,"e",(function(){return z})),t.d(e,"w",(function(){return B})),t.d(e,"a",(function(){return L})),t.d(e,"B",(function(){return U})),t.d(e,"I",(function(){return G})),t.d(e,"E",(function(){return H})),t.d(e,"o",(function(){return K})),t.d(e,"v",(function(){return Q})),t.d(e,"h",(function(){return $})),t.d(e,"u",(function(){return W})),t.d(e,"f",(function(){return X})),t.d(e,"D",(function(){return Y})),t.d(e,"i",(function(){return Z})),t.d(e,"s",(function(){return nn})),t.d(e,"j",(function(){return en})),t.d(e,"r",(function(){return tn})),t.d(e,"m",(function(){return rn})),t.d(e,"d",(function(){return un})),t.d(e,"p",(function(){return on})),t.d(e,"l",(function(){return cn})),t.d(e,"z",(function(){return an})),t.d(e,"n",(function(){return sn})),t.d(e,"t",(function(){return fn})),t.d(e,"y",(function(){return dn})),t.d(e,"x",(function(){return ln})),t.d(e,"H",(function(){return pn})),t.d(e,"J",(function(){return _n})),t.d(e,"C",(function(){return gn}));var r=t(359),u=t(350);const i=new Array(32).fill(void 0);function o(n){return i[n]}i.push(void 0,null,!0,!1);let c=i.length;function a(n){const e=o(n);return function(n){n<36||(i[n]=c,c=n)}(n),e}let s=0,f=null;function d(){return null!==f&&f.buffer===u.m.buffer||(f=new Uint8Array(u.m.buffer)),f}let l=new("undefined"==typeof TextEncoder?(0,n.require)("util").TextEncoder:TextEncoder)("utf-8");const p="function"==typeof l.encodeInto?function(n,e){return l.encodeInto(n,e)}:function(n,e){const t=l.encode(n);return e.set(t),{read:n.length,written:t.length}};function _(n,e,t){if(void 0===t){const t=l.encode(n),r=e(t.length);return d().subarray(r,r+t.length).set(t),s=t.length,r}let r=n.length,u=e(r);const i=d();let o=0;for(;o<r;o++){const e=n.charCodeAt(o);if(e>127)break;i[u+o]=e}if(o!==r){0!==o&&(n=n.slice(o)),u=t(u,r,r=o+3*n.length);const e=d().subarray(u+o,u+r);o+=p(n,e).written}return s=o,u}let g=null;function h(){return null!==g&&g.buffer===u.m.buffer||(g=new Int32Array(u.m.buffer)),g}let m=new("undefined"==typeof TextDecoder?(0,n.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function w(n,e){return m.decode(d().subarray(n,n+e))}function b(n){c===i.length&&i.push(i.length+1);const e=c;return c=i[e],i[e]=n,e}function v(n,e,t){u.f(n,e,b(t))}function y(){return a(u.j())}function k(n){return a(u.g(b(n)))}function x(n){return a(u.n(n))}function R(n){return a(u.p(b(n)))}function O(){return a(u.k())}function S(){return a(u.o())}function T(n){return a(u.h(b(n)))}function j(n){return a(u.i(b(n)))}function P(n){return a(u.q(b(n)))}function D(){return a(u.l())}function E(n){return function(){try{return n.apply(this,arguments)}catch(n){u.a(b(n))}}}function F(n,e){return d().subarray(n/1,n/1+e)}m.decode();const I=function(n){a(n)},A=function(n,e,t,r,i){try{return b(o(n).updateRegardlessOfRev(e>>>0,a(t),w(r,i)))}finally{u.c(r,i)}},q=function(n,e){const t=o(e);var r=_(JSON.stringify(void 0===t?null:t),u.d,u.e),i=s;h()[n/4+1]=i,h()[n/4+0]=r},J=function(n){return b(o(n).allTasks())},M=function(n,e){return b(o(n).deleteRegardlessOfRev(e>>>0))},N=function(){return b(r.a.open())},V=function(n){return b(o(n).allTimeSegments())},C=function(n,e){return b(o(n).get(e>>>0))},z=function(n,e,t,r,i){try{return b(o(n).create(a(e),w(t,r),i>>>0))}finally{u.c(t,r)}},B=function(n,e){return b(o(n).tasksForTimeSegment(e>>>0))},L=function(n){return b(o(n).allTasksPerTimeSegment())},U=function(n){const e=a(n).original;if(1==e.cnt--)return e.a=0,!0;return!1},G=function(n,e){return b(w(n,e))},H=function(n,e){return b(JSON.parse(w(n,e)))},K=function(){return b(new Error)},Q=function(n,e){var t=_(o(e).stack,u.d,u.e),r=s;h()[n/4+1]=r,h()[n/4+0]=t},$=function(n,e){try{console.error(w(n,e))}finally{u.c(n,e)}},W=E((function(){return b(self.self)})),X=function(n){return b(o(n).crypto)},Y=function(n){return void 0===o(n)},Z=function(n){return b(o(n).getRandomValues)},nn=function(n,e){return b(t(372)(w(n,e)))},en=function(n,e,t){o(n).getRandomValues(F(e,t))},tn=function(n,e,t){o(n).randomFillSync(F(e,t))},rn=function(n){return o(n).length},un=E((function(n,e,t){return b(o(n).call(o(e),o(t)))})),on=function(){return Date.now()},cn=function(n){return o(n)instanceof Object},an=function(n){return b(o(n).toString())},sn=function(n,e){try{var t={a:n,b:e},r=new Promise((n,e)=>{const r=t.a;t.a=0;try{return function(n,e,t,r){u.r(n,e,b(t),b(r))}(r,t.b,n,e)}finally{t.a=r}});return b(r)}finally{t.a=t.b=0}},fn=function(n){return b(Promise.resolve(o(n)))},dn=function(n,e){return b(o(n).then(o(e)))},ln=function(n,e,t){return b(o(n).then(o(e),o(t)))},pn=function(n,e){const t=o(e);var r="string"==typeof t?t:void 0,i=null==r?0:_(r,u.d,u.e),c=s;h()[n/4+1]=c,h()[n/4+0]=i},_n=function(n,e){throw new Error(w(n,e))},gn=function(n,e,t){return b(function(n,e,t,r){const i={a:n,b:e,cnt:1},o=(...n)=>{i.cnt++;const e=i.a;i.a=0;try{return r(e,i.b,...n)}finally{0==--i.cnt?u.b.get(t)(e,i.b):i.a=e}};return o.original=i,o}(n,e,195,v))}}).call(this,t(358)(n))},350:function(n,e,t){"use strict";var r=t.w[n.i];n.exports=r;t(346);r.s()},359:function(n,e,t){"use strict";t.d(e,"a",(function(){return l}));t(63),t(136),t(135),t(94),t(137),t(95),t(211),t(212),t(213),t(138),t(20),t(61),t(32),t(64),t(96),t(62);var r=t(360),u=t(373),i=t(1);function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function c(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s(n,e,t,r,u,i,o){try{var c=n[i](o),a=c.value}catch(n){return void t(n)}c.done?e(a):Promise.resolve(a).then(r,u)}function f(n){return function(){var e=this,t=arguments;return new Promise((function(r,u){var i=n.apply(e,t);function o(n){s(i,r,u,o,c,"next",n)}function c(n){s(i,r,u,o,c,"throw",n)}o(void 0)}))}}function d(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}r.a.plugin(u.a);var l=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.pouch=e}var e,t,u,o,a,s,l,p,_,g,h,m,w,b,v,y;return e=n,t=[{key:"migrate",value:(y=f(regeneratorRuntime.mark((function n(){var e,t,r,u,o,a,s,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getVersion();case 2:if(0!==(e=n.sent)){n.next=23;break}return n.next=6,this.pouch.allDocs({include_docs:!0});case 6:return t=n.sent.rows.map((function(n){return n.doc})),r=t.map((function(n){return c(c({},n),{},{type:"task",time_segment_id:0})})),n.next=10,this.pouch.bulkDocs(r);case 10:return u=new Date(2019,0,1,9),o=Array.from({length:7},(function(n,e){var t=i.f(u,e);return[t,i.g(t,8)]})),n.next=14,this.pouch.put({_id:"0",type:"time-segment",name:"Default",start:u.toISOString(),period:604800,ranges:o});case 14:return n.next=16,this.pouch.createIndex({index:{fields:["type"]}});case 16:return n.next=18,this.pouch.createIndex({index:{fields:["_id","type"]}});case 18:return n.next=20,this.pouch.createIndex({index:{fields:["time_segment_id","type"]}});case 20:return n.next=22,this.pouch.put({_id:"metadata",version:1});case 22:e=1;case 23:if(1!==e){n.next=36;break}return n.next=26,this.pouch.find({selector:{type:"time-segment"}});case 26:return a=n.sent.docs,s=a.map((function(n){return c(c({},n),{},{hue:Math.floor(360*Math.random())})})),n.next=30,this.pouch.bulkDocs(s);case 30:return n.next=32,this.pouch.get("metadata");case 32:return f=n.sent,n.next=35,this.pouch.put(c(c({},f),{},{version:2}));case 35:e=2;case 36:case"end":return n.stop()}}),n,this)}))),function(){return y.apply(this,arguments)})},{key:"getVersion",value:(v=f(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.pouch.get("metadata");case 3:return n.abrupt("return",n.sent.version);case 6:if(n.prev=6,n.t0=n.catch(0),"missing"!==n.t0.reason){n.next=10;break}return n.abrupt("return",0);case 10:throw n.t0;case 11:case"end":return n.stop()}}),n,this,[[0,6]])}))),function(){return v.apply(this,arguments)})},{key:"create",value:(b=f(regeneratorRuntime.mark((function n(e,t,r){var u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.pouch.put(c(c({},e),{},{_id:r.toString(),id:void 0,type:t}));case 2:return u=n.sent,console.assert(u.ok),n.abrupt("return",u);case 5:case"end":return n.stop()}}),n,this)}))),function(n,e,t){return b.apply(this,arguments)})},{key:"update",value:(w=f(regeneratorRuntime.mark((function n(e,t,r){var u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.pouch.put(c(c({},e),{},{_id:e.id.toString(),_rev:r,id:void 0,type:t}));case 2:return u=n.sent,console.assert(u.ok),n.abrupt("return",u);case 5:case"end":return n.stop()}}),n,this)}))),function(n,e,t){return w.apply(this,arguments)})},{key:"updateRegardlessOfRev",value:(m=f(regeneratorRuntime.mark((function n(e,t,r){var u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.get(e);case 2:return u=n.sent,n.abrupt("return",this.update(t,r,u._rev));case 4:case"end":return n.stop()}}),n,this)}))),function(n,e,t){return m.apply(this,arguments)})},{key:"get",value:(h=f(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.pouch.get(e.toString()));case 1:case"end":return n.stop()}}),n,this)}))),function(n){return h.apply(this,arguments)})},{key:"delete",value:(g=f(regeneratorRuntime.mark((function n(e,t,r){var u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.pouch.remove(c(c({},e),{},{_id:e.id.toString(),_rev:r,id:void 0,type:t}));case 2:return u=n.sent,console.assert(u.ok),n.abrupt("return",u);case 5:case"end":return n.stop()}}),n,this)}))),function(n,e,t){return g.apply(this,arguments)})},{key:"deleteRegardlessOfRev",value:(_=f(regeneratorRuntime.mark((function n(e){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.get(e);case 2:return t=n.sent,n.next=5,this.pouch.remove(t);case 5:return r=n.sent,console.assert(r.ok),n.abrupt("return",r);case 8:case"end":return n.stop()}}),n,this)}))),function(n){return _.apply(this,arguments)})},{key:"allTasks",value:(p=f(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.pouch.find({selector:{type:"task"}});case 2:return(e=n.sent).warning&&console.warn("Fetching tasks issued a warning: ".concat(e.warning)),n.abrupt("return",e.docs);case 5:case"end":return n.stop()}}),n,this)}))),function(){return p.apply(this,arguments)})},{key:"tasksForTimeSegment",value:(l=f(regeneratorRuntime.mark((function n(e){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.pouch.find({selector:{type:"task",time_segment_id:e}});case 2:return(t=n.sent).warning&&console.warn("Fetching tasks issued a warning: ".concat(t.warning)),n.abrupt("return",t.docs);case 5:case"end":return n.stop()}}),n,this)}))),function(n){return l.apply(this,arguments)})},{key:"allTasksPerTimeSegment",value:(s=f(regeneratorRuntime.mark((function n(){var e,t,r,u,i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.pouch.find({selector:{type:"task",time_segment_id:{$gte:null}},sort:["time_segment_id"]});case 2:return(e=n.sent).warning&&console.warn("Fetching tasks issued a warning: ".concat(e.warning)),t=e.docs,n.next=7,this.pouch.find({selector:{type:"time-segment",_id:{$gte:null}},sort:["_id"]});case 7:return(r=n.sent).warning&&console.warn("Fetching time segments issued a warning: ".concat(r.warning)),u=r.docs,i=[],o=0,u.forEach((function(n){for(var e=o;o<t.length&&t[o].time_segment_id===parseInt(n._id,10);)o+=1;i.push([n,t.slice(e,o)])})),n.abrupt("return",i);case 14:case"end":return n.stop()}}),n,this)}))),function(){return s.apply(this,arguments)})},{key:"allTimeSegments",value:(a=f(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.pouch.find({selector:{type:"time-segment"}});case 2:return(e=n.sent).warning&&console.warn("Fetching time segments issued a warning: ".concat(e.warning)),n.abrupt("return",e.docs);case 5:case"end":return n.stop()}}),n,this)}))),function(){return a.apply(this,arguments)})}],u=[{key:"open",value:(o=f(regeneratorRuntime.mark((function e(){var t,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new r.a("tasks",{auto_compaction:!0}),u=new n(t),e.next=4,u.migrate();case 4:return e.abrupt("return",u);case 5:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})}],t&&d(e.prototype,t),u&&d(e,u),n}()},372:function(n,e){function t(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=372},374:function(n,e,t){"use strict";t.r(e);t(350);var r=t(346);t.d(e,"initialize",(function(){return r.N})),t.d(e,"add_task",(function(){return r.K})),t.d(e,"remove_task",(function(){return r.Q})),t.d(e,"update_task",(function(){return r.S})),t.d(e,"list_tasks",(function(){return r.O})),t.d(e,"schedule",(function(){return r.R})),t.d(e,"add_time_segment",(function(){return r.L})),t.d(e,"delete_time_segment",(function(){return r.M})),t.d(e,"update_time_segment",(function(){return r.T})),t.d(e,"list_time_segments",(function(){return r.P})),t.d(e,"__wbindgen_object_drop_ref",(function(){return r.G})),t.d(e,"__wbg_updateRegardlessOfRev_4ea4921df415c280",(function(){return r.A})),t.d(e,"__wbindgen_json_serialize",(function(){return r.F})),t.d(e,"__wbg_allTasks_274360413ad1813c",(function(){return r.b})),t.d(e,"__wbg_deleteRegardlessOfRev_1d703a859e055cfb",(function(){return r.g})),t.d(e,"__wbg_open_25e51719f33ee0ae",(function(){return r.q})),t.d(e,"__wbg_allTimeSegments_c4d78973c303166a",(function(){return r.c})),t.d(e,"__wbg_get_65c04f2393b92c1c",(function(){return r.k})),t.d(e,"__wbg_create_a5d8dd19accdab09",(function(){return r.e})),t.d(e,"__wbg_tasksForTimeSegment_c42826cd8fc65259",(function(){return r.w})),t.d(e,"__wbg_allTasksPerTimeSegment_320bc9bd7366de30",(function(){return r.a})),t.d(e,"__wbindgen_cb_drop",(function(){return r.B})),t.d(e,"__wbindgen_string_new",(function(){return r.I})),t.d(e,"__wbindgen_json_parse",(function(){return r.E})),t.d(e,"__wbg_new_59cb74e423758ede",(function(){return r.o})),t.d(e,"__wbg_stack_558ba5917b466edd",(function(){return r.v})),t.d(e,"__wbg_error_4bb6c2a97407129a",(function(){return r.h})),t.d(e,"__wbg_self_1b7a39e3a92c949c",(function(){return r.u})),t.d(e,"__wbg_crypto_968f1772287e2df0",(function(){return r.f})),t.d(e,"__wbindgen_is_undefined",(function(){return r.D})),t.d(e,"__wbg_getRandomValues_a3d34b4fee3c2869",(function(){return r.i})),t.d(e,"__wbg_require_604837428532a733",(function(){return r.s})),t.d(e,"__wbg_getRandomValues_f5e14ab7ac8e995d",(function(){return r.j})),t.d(e,"__wbg_randomFillSync_d5bd2d655fdf256a",(function(){return r.r})),t.d(e,"__wbg_length_0f0e68fde7e14c19",(function(){return r.m})),t.d(e,"__wbg_call_0246f1c8ff252fb6",(function(){return r.d})),t.d(e,"__wbg_now_91bb099d0ca251fd",(function(){return r.p})),t.d(e,"__wbg_instanceof_Object_42d4e98f6a3c8730",(function(){return r.l})),t.d(e,"__wbg_toString_4440a79f58a2e160",(function(){return r.z})),t.d(e,"__wbg_new_09f2ad087112acf0",(function(){return r.n})),t.d(e,"__wbg_resolve_708df7651c8929b8",(function(){return r.t})),t.d(e,"__wbg_then_8c23dce80c84c8fb",(function(){return r.y})),t.d(e,"__wbg_then_300153bb889a5b4b",(function(){return r.x})),t.d(e,"__wbindgen_string_get",(function(){return r.H})),t.d(e,"__wbindgen_throw",(function(){return r.J})),t.d(e,"__wbindgen_closure_wrapper472",(function(){return r.C}))}}]);
//# sourceMappingURL=2.2a6d68b8d271b1fd4701.js.map